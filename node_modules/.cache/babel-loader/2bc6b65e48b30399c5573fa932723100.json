{"ast":null,"code":"import _defineProperty from\"/Users/aslalamentik/Desktop/salarysprout/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _regeneratorRuntime from\"/Users/aslalamentik/Desktop/salarysprout/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/aslalamentik/Desktop/salarysprout/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/aslalamentik/Desktop/salarysprout/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from'react';import{useEffect,useRef}from'react';import algosdk from'algosdk';import{makeStyles}from'@material-ui/core/styles';import CssBaseline from'@material-ui/core/CssBaseline';import{axios}from'./base';import Button from'@material-ui/core/Button';import InputLabel from'@material-ui/core/InputLabel';import MenuItem from'@material-ui/core/MenuItem';import FormHelperText from'@material-ui/core/FormHelperText';import Select from'@material-ui/core/Select';import Toolbar from'@material-ui/core/Toolbar';import IconButton from'@material-ui/core/IconButton';import SearchIcon from'@material-ui/icons/Search';import FormControl from'@material-ui/core/FormControl';import Paper from'@material-ui/core/Paper';import Typography from'@material-ui/core/Typography';import Grid from'@material-ui/core/Grid';import Card from'@material-ui/core/Card';import CardActionArea from'@material-ui/core/CardActionArea';import CardContent from'@material-ui/core/CardContent';import CardMedia from'@material-ui/core/CardMedia';import Hidden from'@material-ui/core/Hidden';import Link from'@material-ui/core/Link';import Divider from'@material-ui/core/Divider';import Container from'@material-ui/core/Container';import Markdown from'./Markdown';import TextField from'@material-ui/core/TextField';import'../css/style.css';// Tell Webpack that Button.js uses these styles\nimport{blockStatement}from'@babel/types';export default function UserProfile(props){var _React$createElement2;var classes=props.classes,db=props.db,user=props.user,cheerio=props.cheerio;var _React$useState=React.useState(''),_React$useState2=_slicedToArray(_React$useState,2),profileJsx=_React$useState2[0],setProfileJsx=_React$useState2[1];var _React$useState3=React.useState(''),_React$useState4=_slicedToArray(_React$useState3,2),analysisJsx=_React$useState4[0],setAnalysisJsx=_React$useState4[1];var _React$useState5=React.useState({}),_React$useState6=_slicedToArray(_React$useState5,2),userData=_React$useState6[0],setUserData=_React$useState6[1];var _React$useState7=React.useState(false),_React$useState8=_slicedToArray(_React$useState7,2),mnemonicBox=_React$useState8[0],setMnemonicBox=_React$useState8[1];var _React$useState9=React.useState(''),_React$useState10=_slicedToArray(_React$useState9,2),mnemonic=_React$useState10[0],setMnemonic=_React$useState10[1];console.log(user);var keyWordsMap={\"name\":\"Name\",\"accountAddress\":\"Account Address\",\"company\":\"Company\",\"position\":\"Position\",\"yoe\":\"Years of Experience\",\"salary\":\"Salary ($/year)\"};//from ZipRecruiter\nvar avgSalaries={\"software engineer\":98495,\"senior software engineer\":118706,\"software developer\":85929,\"senior software developer\":109921,\"hardware engineer\":102037,\"senior hardware engineer\":118563,\"ux designer\":97873,\"senior ux designer\":118242,\"cloud engineer\":129567,\"senior cloud engineer\":141706,\"front end engineer\":111789,\"senior front end engineer\":132069,\"engineer\":73081,\"senior engineer\":104865};var userRef=db.collection('users').doc(user.email.split('.').join(''));var mounted=useRef();useEffect(function(){if(!mounted.current&&profileJsx==''){renderProfile();}if(analysisJsx==''){renderAnalysis();}});var renderProfile=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var jsx,getDoc;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(user){_context2.next=2;break;}return _context2.abrupt(\"return\");case 2:jsx=[];_context2.next=5;return userRef.get().then(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(doc){var data,a;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(doc.exists){_context.next=4;break;}return _context.abrupt(\"return\",React.createElement(React.Fragment,null,\"Profile not found. \"));case 4:data=doc.data();setUserData(data);for(a in keyWordsMap){console.log(keyWordsMap[a],data[a]);jsx.push(React.createElement(\"span\",{className:\"profileEntry\",key:a},keyWordsMap[a],\" : \",React.createElement(\"b\",null,data[a]),\"  \",React.createElement(\"br\",null)));}case 7:setProfileJsx(jsx);renderAnalysis();case 9:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref2.apply(this,arguments);};}()).catch(function(err){console.log('Error getting document',err);});case 5:getDoc=_context2.sent;case 6:case\"end\":return _context2.stop();}}},_callee2);}));return function renderProfile(){return _ref.apply(this,arguments);};}();var renderAnalysis=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var _userData$position,position,_userData$yoe,yoe,_userData$salary,salary,_userData$accountAddr,accountAddress,avgSalary,jsx,absDiff,more,seniorDiff;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_userData$position=userData.position,position=_userData$position===void 0?'':_userData$position,_userData$yoe=userData.yoe,yoe=_userData$yoe===void 0?'':_userData$yoe,_userData$salary=userData.salary,salary=_userData$salary===void 0?'':_userData$salary,_userData$accountAddr=userData.accountAddress,accountAddress=_userData$accountAddr===void 0?'':_userData$accountAddr;avgSalary=avgSalaries[position.toLowerCase()]||56516;//or average US salary\njsx=[];absDiff=Math.abs(salary-avgSalary);more=salary-avgSalary>0;jsx.push(React.createElement(React.Fragment,null,\"You are making \",React.createElement(\"b\",null,\"$\",absDiff),\" \",more?'more':'less',\" than what an average \",avgSalaries[position.toLowerCase()]?position.toLowerCase():'worker',\" makes in the United States. \"));if(!more){if(yoe>=2&&yoe<3){jsx.push(React.createElement(React.Fragment,null,\"Given your years of experience, you should aim for a promotion and a raise soon if circumstances permit. \"));}else if(yoe>=3){jsx.push(React.createElement(React.Fragment,null,\"Given your years of experience, you should ask for a promotion and a raise soon if circumstances permit. \"));}else if(yoe>5){jsx.push(React.createElement(React.Fragment,null,\"Given your ample experience as a \",position.toLowerCase(),\", it is definitely time for a promotion and a raise if you have not gotten one recently. \"));}if(avgSalaries[\"senior \"+position.toLowerCase()]){seniorDiff=avgSalaries[\"senior \"+position.toLowerCase()]-salary;jsx.push(React.createElement(React.Fragment,null,\"You could be making \",React.createElement(\"b\",null,\"$\",seniorDiff),\" more as a senior \",position.toLowerCase(),\". Don't be afraid to bring up your career goals and aspirations, there may be people who can help get you there. You can do it!\",React.createElement(\"br\",null),React.createElement(\"br\",null),\"Fun fact: Studies found that you are likely to get more promotions at the age of 25 and 30 years old than any other age group.\"));}}else{jsx.push(React.createElement(React.Fragment,null,\"Keep up the good work! Think about how you can elevate others and help them get to where you are today. \"));}console.log(userData);setAnalysisJsx(jsx);case 9:case\"end\":return _context3.stop();}}},_callee3);}));return function renderAnalysis(){return _ref3.apply(this,arguments);};}();var algoexplorerUrl=\"https://testnet.algoexplorer.io/address/\"+userData.accountAddress;function reportSalaryToBlockchain(){return _reportSalaryToBlockchain.apply(this,arguments);}function _reportSalaryToBlockchain(){_reportSalaryToBlockchain=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var objToSend,secret_key,txn,signedTxn;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:objToSend={\"position\":userData.position,\"yearsOfExperience\":userData.yoe,\"gender\":userData.gender,\"salary\":userData.salary};secret_key=algosdk.mnemonicToSecretKey(mnemonic);txn={\"to\":\"43DYQRD5K5QWVUALPG25XHT5KR3FXUUBX3MABK7CVFMZEMIZAL5WRRIFMI\",\"fee\":0,\"amount\":100000,\"firstRound\":51,\"lastRound\":61,\"genesisID\":\"devnet-v33.0\",\"genesisHash\":\"JgsgCaCTqIaLeVhyL6XlRu3n7Rfk2FxMeK+wRSaQ7dI=\",\"closeRemainderTo\":\"IDUTJEUIEVSMXTU4LGTJWZ2UE2E6TIODUKU6UW3FU3UKIQQ77RLUBBBFLA\",\"note\":algosdk.encodeObj(objToSend)};signedTxn=algosdk.signTransaction(txn,secret_key.sk);case 4:case\"end\":return _context4.stop();}}},_callee4);}));return _reportSalaryToBlockchain.apply(this,arguments);}return React.createElement(React.Fragment,null,React.createElement(Grid,{container:true,spacing:4},React.createElement(Grid,{item:true,key:\"userProfile\",xs:12,md:6},React.createElement(Card,{className:classes.card},React.createElement(\"div\",{className:classes.cardDetails},React.createElement(\"div\",{className:\"app-box\"},React.createElement(\"div\",{className:\"app-box-title\"},\"User Profile\"),React.createElement(\"div\",{className:\"app-box-content\"},profileJsx,!mnemonicBox&&user&&!user.onchain?React.createElement(React.Fragment,null,React.createElement(\"div\",{className:\"margintop2\"},\"Sharing your salary is anonymous on the Algorand blockchain as long as you do not reveal your account address to anyone. Only the following fields will be shared: your gender, position, years of experience, and salary. Sharing your salary will help promote wage equality, and help others with making their job decisions.\"),React.createElement(Button,_defineProperty({className:\"app-button\",onClick:function onClick(){setMnemonicBox(true);},variant:\"contained\",color:\"primary\"},\"className\",classes.button),\" Share your salary on-chain\")):null,mnemonicBox&&React.createElement(React.Fragment,null,React.createElement(\"div\",null,React.createElement(\"span\",{className:\"margintop2\"},\"First, visit \",React.createElement(\"a\",{href:\"https://bank.testnet.algorand.network/\",target:\"_blank\"},\"the Algorand dispenser\"),\" to get some Algos for this blockchain transaction. Copy your account address shown above into the target address field on the dispenser page, complete the CAPTCHA and dispense. To check if the transaction was successful,\",React.createElement(\"a\",{href:algoexplorerUrl,target:\"_blank\"},\" visit this link to the Algoexplorer\"),\". You should have a balance of 100 Algos (it might take a minute).\")),React.createElement(TextField,{placeholder:\"Enter your private key (mnemonic phrase)\",multiline:true,rows:2,rowsMax:4,onChange:function onChange(event){setMnemonic(event.target.value);},margin:\"normal\",variant:\"outlined\"}),React.createElement(\"br\",null),React.createElement(Button,(_React$createElement2={className:\"app-button\",onClick:function onClick(){},variant:\"contained\",color:\"primary\"},_defineProperty(_React$createElement2,\"onClick\",function onClick(){reportSalaryToBlockchain();}),_defineProperty(_React$createElement2,\"className\",classes.button),_React$createElement2),\" Submit\"),\"\\xA0\\xA0\\xA0\",React.createElement(Button,_defineProperty({className:\"app-button\",onClick:function onClick(){setMnemonicBox(false);},variant:\"contained\",color:\"primary\"},\"className\",classes.button),\" Cancel\"))))))),React.createElement(Grid,{item:true,key:\"profileAnalysis\",xs:12,md:6},React.createElement(Card,{className:classes.card},React.createElement(\"div\",{className:classes.cardDetails},React.createElement(\"div\",{className:\"app-box\"},React.createElement(\"div\",{className:\"app-box-title\"},\"Performance Analysis\"),React.createElement(\"div\",{className:\"app-box-content no-word-break\"},analysisJsx),React.createElement(\"a\",{href:\"https://testnet.algoexplorer.io/address/43DYQRD5K5QWVUALPG25XHT5KR3FXUUBX3MABK7CVFMZEMIZAL5WRRIFMI\",target:\"_blank\"},\"Browse others' salaries on-chain\")))))));}","map":{"version":3,"sources":["/Users/aslalamentik/Desktop/salarysprout/src/components/UserProfile.js"],"names":["React","useEffect","useRef","algosdk","makeStyles","CssBaseline","axios","Button","InputLabel","MenuItem","FormHelperText","Select","Toolbar","IconButton","SearchIcon","FormControl","Paper","Typography","Grid","Card","CardActionArea","CardContent","CardMedia","Hidden","Link","Divider","Container","Markdown","TextField","blockStatement","UserProfile","props","classes","db","user","cheerio","useState","profileJsx","setProfileJsx","analysisJsx","setAnalysisJsx","userData","setUserData","mnemonicBox","setMnemonicBox","mnemonic","setMnemonic","console","log","keyWordsMap","avgSalaries","userRef","collection","doc","email","split","join","mounted","current","renderProfile","renderAnalysis","jsx","get","then","exists","data","a","push","catch","err","getDoc","position","yoe","salary","accountAddress","avgSalary","toLowerCase","absDiff","Math","abs","more","seniorDiff","algoexplorerUrl","reportSalaryToBlockchain","objToSend","gender","secret_key","mnemonicToSecretKey","txn","encodeObj","signedTxn","signTransaction","sk","card","cardDetails","onchain","button","event","target","value"],"mappings":"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","sourcesContent":["import React from 'react';\nimport {useEffect, useRef} from 'react';\nimport algosdk from 'algosdk';\nimport { makeStyles } from '@material-ui/core/styles';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport { axios } from './base';\nimport Button from '@material-ui/core/Button';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport Select from '@material-ui/core/Select';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport IconButton from '@material-ui/core/IconButton';\nimport SearchIcon from '@material-ui/icons/Search';\nimport FormControl from '@material-ui/core/FormControl';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport Grid from '@material-ui/core/Grid';\nimport Card from '@material-ui/core/Card';\nimport CardActionArea from '@material-ui/core/CardActionArea';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardMedia from '@material-ui/core/CardMedia';\nimport Hidden from '@material-ui/core/Hidden';\nimport Link from '@material-ui/core/Link';\nimport Divider from '@material-ui/core/Divider';\nimport Container from '@material-ui/core/Container';\nimport Markdown from './Markdown';\nimport TextField from '@material-ui/core/TextField';\nimport '../css/style.css'; // Tell Webpack that Button.js uses these styles\nimport { blockStatement } from '@babel/types';\n\nexport default function UserProfile(props) {\n  const {classes, db, user, cheerio} = props;\n  let [profileJsx, setProfileJsx] = React.useState('');\n  let [analysisJsx, setAnalysisJsx] = React.useState('');\n  let [userData, setUserData] = React.useState({});\n  let [mnemonicBox, setMnemonicBox] = React.useState(false);\n  let [mnemonic, setMnemonic] = React.useState('');\n\n\n  console.log(user);\n  const keyWordsMap = {\n    \"name\" : \"Name\",\n    \"accountAddress\" : \"Account Address\",\n    \"company\" : \"Company\",\n    \"position\" : \"Position\",\n    \"yoe\" : \"Years of Experience\",\n    \"salary\" : \"Salary ($/year)\"\n  }\n\n  //from ZipRecruiter\n  const avgSalaries = {\n    \"software engineer\" : 98495,\n    \"senior software engineer\": 118706,\n    \"software developer\": 85929,\n    \"senior software developer\": 109921,\n    \"hardware engineer\": 102037,\n    \"senior hardware engineer\": 118563,\n    \"ux designer\": 97873,\n    \"senior ux designer\": 118242,\n    \"cloud engineer\": 129567,\n    \"senior cloud engineer\": 141706,\n    \"front end engineer\": 111789,\n    \"senior front end engineer\": 132069,\n    \"engineer\": 73081,\n    \"senior engineer\": 104865\n  }\n\n  let userRef = db.collection('users').doc((user.email).split('.').join(''));\n\n  const mounted = useRef();\n  useEffect(() => {\n      if (!mounted.current && profileJsx == '') {\n          renderProfile();\n      } \n      if (analysisJsx == '') {\n        renderAnalysis();\n      }\n  });\n  \n  const renderProfile = async () => {\n    if (!user) return;\n    let jsx = [];\n    let getDoc = await userRef.get()\n    .then(async (doc) => {\n      if (!doc.exists) {\n        return <>Profile not found. </>;\n      } else {\n        const data = doc.data();\n        setUserData(data);\n        for (var a in keyWordsMap) {\n          console.log(keyWordsMap[a], data[a]);\n          jsx.push(<span className='profileEntry' key={a}>{keyWordsMap[a]} : <b>{data[a]}</b>  <br></br></span>)\n        }\n\n      }\n      setProfileJsx(jsx);\n      renderAnalysis();\n    })\n    .catch(err => {\n      console.log('Error getting document', err);\n    });\n  }\n\n  const renderAnalysis = async () => {\n    const { position = '', yoe = '', salary = '', accountAddress = '' } = userData;\n    const avgSalary = avgSalaries[position.toLowerCase()] || 56516; //or average US salary\n    const jsx = [];\n    const absDiff = Math.abs(salary - avgSalary);\n    const more = (salary - avgSalary) > 0;\n    jsx.push(<>You are making <b>${absDiff}</b> {more ? 'more' : 'less'} than what an average {avgSalaries[position.toLowerCase()] ? position.toLowerCase() : 'worker'} makes in the United States. </>);\n    if (!more) {\n      if (yoe >=2 && yoe < 3) {\n        jsx.push(<>Given your years of experience, you should aim for a promotion and a raise soon if circumstances permit. </>);\n      } else if (yoe >= 3) {\n        jsx.push(<>Given your years of experience, you should ask for a promotion and a raise soon if circumstances permit. </>);\n      } else if (yoe > 5) {\n        jsx.push(<>Given your ample experience as a {position.toLowerCase()}, it is definitely time for a promotion and a raise if you have not gotten one recently. </>);\n      }\n      if (avgSalaries[\"senior \" + position.toLowerCase()]) {\n        const seniorDiff = avgSalaries[\"senior \" + position.toLowerCase()] - salary;\n        jsx.push(<>You could be making <b>${seniorDiff}</b> more as a senior {position.toLowerCase()}. \n        Don't be afraid to bring up your career goals and aspirations, there may be people who can help get you there.\n         You can do it!<br></br><br></br>\n        Fun fact: Studies found that you are likely to get more promotions at the age of \n        25 and 30 years old than any other age group.</>);\n      }\n    } else {\n      jsx.push(<>Keep up the good work! Think about how you can elevate others and help them get to where you are today. </>);\n    }\n    console.log(userData);\n    setAnalysisJsx(jsx);\n  }\n\n  const algoexplorerUrl = \"https://testnet.algoexplorer.io/address/\" + userData.accountAddress;\n\n  async function reportSalaryToBlockchain() {\n    const objToSend = {\n      \"position\" : userData.position,\n      \"yearsOfExperience\" : userData.yoe,\n      \"gender\" : userData.gender,\n      \"salary\" : userData.salary\n    }\n    var secret_key = algosdk.mnemonicToSecretKey(mnemonic);\n    const txn = { \n      \"to\": \"43DYQRD5K5QWVUALPG25XHT5KR3FXUUBX3MABK7CVFMZEMIZAL5WRRIFMI\",\n      \"fee\": 0,\n      \"amount\": 100000,\n      \"firstRound\": 51,\n      \"lastRound\": 61,\n      \"genesisID\": \"devnet-v33.0\",\n      \"genesisHash\": \"JgsgCaCTqIaLeVhyL6XlRu3n7Rfk2FxMeK+wRSaQ7dI=\",\n      \"closeRemainderTo\": \"IDUTJEUIEVSMXTU4LGTJWZ2UE2E6TIODUKU6UW3FU3UKIQQ77RLUBBBFLA\",\n      \"note\": algosdk.encodeObj(objToSend)\n    };\n    var signedTxn = algosdk.signTransaction(txn, secret_key.sk);\n  }\n\n  return (\n    <><Grid container spacing={4}><Grid item key=\"userProfile\" xs={12} md={6}>\n                  <Card className={classes.card}>\n                    <div className={classes.cardDetails}>\n                        <div className=\"app-box\">\n                            <div className='app-box-title'>User Profile</div>\n                              <div className='app-box-content'>{profileJsx}\n                              {(!mnemonicBox && user && !user.onchain) ?  <>\n                              <div className='margintop2'>Sharing your salary is anonymous on the Algorand blockchain as long as you do not reveal your account address to anyone.\n                                 Only the following fields will be shared: your gender, position, years of experience, and salary. Sharing your salary will help promote wage equality, and help\n                                  others with making their job decisions.\n                              </div>\n                              <Button className='app-button' onClick={() => { setMnemonicBox(true)}\n                                                        }  variant=\"contained\" color=\"primary\" className={classes.button}> Share your salary on-chain</Button></> : null}\n                              {mnemonicBox && (\n                                <>\n                                <div>\n                                <span className='margintop2'>First, visit <a href=\"https://bank.testnet.algorand.network/\" target=\"_blank\">the Algorand dispenser</a> to get some Algos for this blockchain transaction. \n                                Copy your account address shown above into the target address field on the dispenser page, complete the CAPTCHA and dispense. To check if the transaction was successful, \n                                <a href={algoexplorerUrl} target=\"_blank\"> visit this link to the Algoexplorer</a>. You should have a balance of 100 Algos (it might take a minute).</span></div>\n                                <TextField \n                                    placeholder=\"Enter your private key (mnemonic phrase)\"\n                                    multiline={true}\n                                    rows={2}\n                                    rowsMax={4}\n                                    onChange={ (event) => {setMnemonic(event.target.value) }}\n                                    margin=\"normal\"\n                                    variant=\"outlined\"\n                                  /><br></br>\n                                  <Button className='app-button' onClick={() => { }\n                                }  variant=\"contained\" color=\"primary\"  onClick={() => { reportSalaryToBlockchain()}} className={classes.button}> Submit</Button>&nbsp;&nbsp;&nbsp;\n                                <Button className='app-button' onClick={() => { setMnemonicBox(false)}\n                                                        }  variant=\"contained\" color=\"primary\" className={classes.button}> Cancel</Button></>\n                              )}\n                              </div>\n                        </div>\n                    </div>\n                  </Card>\n      </Grid>\n      <Grid item key=\"profileAnalysis\" xs={12} md={6}>\n                        <Card className={classes.card}>\n                          <div className={classes.cardDetails}>\n                              <div className=\"app-box\">\n                                  <div className='app-box-title'>Performance Analysis</div>\n                                    <div className='app-box-content no-word-break'>{analysisJsx}</div>\n                                    <a href=\"https://testnet.algoexplorer.io/address/43DYQRD5K5QWVUALPG25XHT5KR3FXUUBX3MABK7CVFMZEMIZAL5WRRIFMI\" target=\"_blank\">Browse others' salaries on-chain</a>\n                              </div>\n                          </div>\n                        </Card>\n      </Grid></Grid></>\n  );\n}"]},"metadata":{},"sourceType":"module"}