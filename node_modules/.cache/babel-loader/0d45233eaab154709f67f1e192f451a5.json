{"ast":null,"code":"import _slicedToArray from \"/Users/aslalamentik/Desktop/salarysprout/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/aslalamentik/Desktop/salarysprout/src/components/UserProfile.js\";\nimport React from 'react';\nimport { useEffect, useRef } from 'react';\nimport algosdk from 'algosdk';\nimport { makeStyles } from '@material-ui/core/styles';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport { axios } from './base';\nimport Button from '@material-ui/core/Button';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport Select from '@material-ui/core/Select';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport IconButton from '@material-ui/core/IconButton';\nimport SearchIcon from '@material-ui/icons/Search';\nimport FormControl from '@material-ui/core/FormControl';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport Grid from '@material-ui/core/Grid';\nimport Card from '@material-ui/core/Card';\nimport CardActionArea from '@material-ui/core/CardActionArea';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardMedia from '@material-ui/core/CardMedia';\nimport Hidden from '@material-ui/core/Hidden';\nimport Link from '@material-ui/core/Link';\nimport Divider from '@material-ui/core/Divider';\nimport Container from '@material-ui/core/Container';\nimport Markdown from './Markdown';\nimport TextField from '@material-ui/core/TextField';\nimport '../css/style.css'; // Tell Webpack that Button.js uses these styles\n\nimport { blockStatement } from '@babel/types';\nexport default function UserProfile(props) {\n  const classes = props.classes,\n        db = props.db,\n        user = props.user,\n        cheerio = props.cheerio;\n\n  let _React$useState = React.useState(''),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      profileJsx = _React$useState2[0],\n      setProfileJsx = _React$useState2[1];\n\n  let _React$useState3 = React.useState(''),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      analysisJsx = _React$useState4[0],\n      setAnalysisJsx = _React$useState4[1];\n\n  let _React$useState5 = React.useState({}),\n      _React$useState6 = _slicedToArray(_React$useState5, 2),\n      userData = _React$useState6[0],\n      setUserData = _React$useState6[1];\n\n  let _React$useState7 = React.useState(false),\n      _React$useState8 = _slicedToArray(_React$useState7, 2),\n      mnemonicBox = _React$useState8[0],\n      setMnemonicBox = _React$useState8[1];\n\n  let _React$useState9 = React.useState(''),\n      _React$useState10 = _slicedToArray(_React$useState9, 2),\n      mnemonic = _React$useState10[0],\n      setMnemonic = _React$useState10[1];\n\n  const algod_address = \"http://hackathon.algodev.network\";\n  const algod_token = \"ef920e2e7e002953f4b29a8af720efe8e4ecc75ff102b165e0472834b25832c1\";\n  const algod_client = new algosdk.Algod(token, server, \"9100\");\n  (async () => {\n    console.log((await client.status()));\n  })().catch(e => {\n    console.log(e);\n  });\n  console.log(user);\n  const keyWordsMap = {\n    \"name\": \"Name\",\n    \"accountAddress\": \"Account Address\",\n    \"company\": \"Company\",\n    \"position\": \"Position\",\n    \"yoe\": \"Years of Experience\",\n    \"salary\": \"Salary ($/year)\"\n  }; //from ZipRecruiter\n\n  const avgSalaries = {\n    \"software engineer\": 98495,\n    \"senior software engineer\": 118706,\n    \"software developer\": 85929,\n    \"senior software developer\": 109921,\n    \"hardware engineer\": 102037,\n    \"senior hardware engineer\": 118563,\n    \"ux designer\": 97873,\n    \"senior ux designer\": 118242,\n    \"cloud engineer\": 129567,\n    \"senior cloud engineer\": 141706,\n    \"front end engineer\": 111789,\n    \"senior front end engineer\": 132069,\n    \"engineer\": 73081,\n    \"senior engineer\": 104865\n  };\n  let userRef = db.collection('users').doc(user.email.split('.').join(''));\n  const mounted = useRef();\n  useEffect(() => {\n    if (!mounted.current && profileJsx == '') {\n      renderProfile();\n    }\n\n    if (analysisJsx == '') {\n      renderAnalysis();\n    }\n  });\n\n  const renderProfile = async () => {\n    if (!user) return;\n    let jsx = [];\n    let getDoc = await userRef.get().then(async doc => {\n      if (!doc.exists) {\n        return React.createElement(React.Fragment, null, \"Profile not found. \");\n      } else {\n        const data = doc.data();\n        setUserData(data);\n\n        for (var a in keyWordsMap) {\n          console.log(keyWordsMap[a], data[a]);\n          jsx.push(React.createElement(\"span\", {\n            className: \"profileEntry\",\n            key: a,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 103\n            },\n            __self: this\n          }, keyWordsMap[a], \" : \", React.createElement(\"b\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 103\n            },\n            __self: this\n          }, data[a]), \"  \", React.createElement(\"br\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 103\n            },\n            __self: this\n          })));\n        }\n      }\n\n      setProfileJsx(jsx);\n      renderAnalysis();\n    }).catch(err => {\n      console.log('Error getting document', err);\n    });\n  };\n\n  const renderAnalysis = async () => {\n    const _userData$position = userData.position,\n          position = _userData$position === void 0 ? '' : _userData$position,\n          _userData$yoe = userData.yoe,\n          yoe = _userData$yoe === void 0 ? '' : _userData$yoe,\n          _userData$salary = userData.salary,\n          salary = _userData$salary === void 0 ? '' : _userData$salary,\n          _userData$accountAddr = userData.accountAddress,\n          accountAddress = _userData$accountAddr === void 0 ? '' : _userData$accountAddr;\n    const avgSalary = avgSalaries[position.toLowerCase()] || 56516; //or average US salary\n\n    const jsx = [];\n    const absDiff = Math.abs(salary - avgSalary);\n    const more = salary - avgSalary > 0;\n    jsx.push(React.createElement(React.Fragment, null, \"You are making \", React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }, \"$\", absDiff), \" \", more ? 'more' : 'less', \" than what an average \", avgSalaries[position.toLowerCase()] ? position.toLowerCase() : 'worker', \" makes in the United States. \"));\n\n    if (!more) {\n      if (yoe >= 2 && yoe < 3) {\n        jsx.push(React.createElement(React.Fragment, null, \"Given your years of experience, you should aim for a promotion and a raise soon if circumstances permit. \"));\n      } else if (yoe >= 3) {\n        jsx.push(React.createElement(React.Fragment, null, \"Given your years of experience, you should ask for a promotion and a raise soon if circumstances permit. \"));\n      } else if (yoe > 5) {\n        jsx.push(React.createElement(React.Fragment, null, \"Given your ample experience as a \", position.toLowerCase(), \", it is definitely time for a promotion and a raise if you have not gotten one recently. \"));\n      }\n\n      if (avgSalaries[\"senior \" + position.toLowerCase()]) {\n        const seniorDiff = avgSalaries[\"senior \" + position.toLowerCase()] - salary;\n        jsx.push(React.createElement(React.Fragment, null, \"You could be making \", React.createElement(\"b\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 132\n          },\n          __self: this\n        }, \"$\", seniorDiff), \" more as a senior \", position.toLowerCase(), \". Don't be afraid to bring up your career goals and aspirations, there may be people who can help get you there. You can do it!\", React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 134\n          },\n          __self: this\n        }), React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 134\n          },\n          __self: this\n        }), \"Fun fact: Studies found that you are likely to get more promotions at the age of 25 and 30 years old than any other age group.\"));\n      }\n    } else {\n      jsx.push(React.createElement(React.Fragment, null, \"Keep up the good work! Think about how you can elevate others and help them get to where you are today. \"));\n    }\n\n    console.log(userData);\n    setAnalysisJsx(jsx);\n  };\n\n  const algoexplorerUrl = \"https://testnet.algoexplorer.io/address/\" + userData.accountAddress;\n\n  async function reportSalaryToBlockchain() {\n    const objToSend = {\n      \"position\": userData.position,\n      \"yearsOfExperience\": userData.yoe,\n      \"gender\": userData.gender,\n      \"salary\": userData.salary\n    };\n    var secret_key = algosdk.mnemonicToSecretKey(mnemonic);\n    const txn = {\n      \"to\": \"43DYQRD5K5QWVUALPG25XHT5KR3FXUUBX3MABK7CVFMZEMIZAL5WRRIFMI\",\n      \"fee\": 0,\n      \"amount\": 100000,\n      \"firstRound\": 51,\n      \"lastRound\": 61,\n      \"genesisID\": \"devnet-v33.0\",\n      \"genesisHash\": \"JgsgCaCTqIaLeVhyL6XlRu3n7Rfk2FxMeK+wRSaQ7dI=\",\n      \"closeRemainderTo\": \"IDUTJEUIEVSMXTU4LGTJWZ2UE2E6TIODUKU6UW3FU3UKIQQ77RLUBBBFLA\",\n      \"note\": algosdk.encodeObj(objToSend)\n    };\n    var signedTxn = algosdk.signTransaction(txn, secret_key.sk);\n  }\n\n  return React.createElement(React.Fragment, null, React.createElement(Grid, {\n    container: true,\n    spacing: 4,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170\n    },\n    __self: this\n  }, React.createElement(Grid, {\n    item: true,\n    key: \"userProfile\",\n    xs: 12,\n    md: 6,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170\n    },\n    __self: this\n  }, React.createElement(Card, {\n    className: classes.card,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: classes.cardDetails,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"app-box\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"app-box-title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174\n    },\n    __self: this\n  }, \"User Profile\"), React.createElement(\"div\", {\n    className: \"app-box-content\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175\n    },\n    __self: this\n  }, profileJsx, !mnemonicBox && user && !user.onchain ? React.createElement(React.Fragment, null, React.createElement(\"div\", {\n    className: \"margintop2\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177\n    },\n    __self: this\n  }, \"Sharing your salary is anonymous on the Algorand blockchain as long as you do not reveal your account address to anyone. Only the following fields will be shared: your gender, position, years of experience, and salary. Sharing your salary will help promote wage equality, and help others with making their job decisions.\"), React.createElement(Button, {\n    className: \"app-button\",\n    onClick: () => {\n      setMnemonicBox(true);\n    },\n    variant: \"contained\",\n    color: \"primary\",\n    className: classes.button,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181\n    },\n    __self: this\n  }, \" Share your salary on-chain\")) : null, mnemonicBox && React.createElement(React.Fragment, null, React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185\n    },\n    __self: this\n  }, React.createElement(\"span\", {\n    className: \"margintop2\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186\n    },\n    __self: this\n  }, \"First, visit \", React.createElement(\"a\", {\n    href: \"https://bank.testnet.algorand.network/\",\n    target: \"_blank\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186\n    },\n    __self: this\n  }, \"the Algorand dispenser\"), \" to get some Algos for this blockchain transaction. Copy your account address shown above into the target address field on the dispenser page, complete the CAPTCHA and dispense. To check if the transaction was successful,\", React.createElement(\"a\", {\n    href: algoexplorerUrl,\n    target: \"_blank\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188\n    },\n    __self: this\n  }, \" visit this link to the Algoexplorer\"), \". You should have a balance of 100 Algos (it might take a minute).\")), React.createElement(TextField, {\n    placeholder: \"Enter your private key (mnemonic phrase)\",\n    multiline: true,\n    rows: 2,\n    rowsMax: 4,\n    onChange: event => {\n      setMnemonic(event.target.value);\n    },\n    margin: \"normal\",\n    variant: \"outlined\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189\n    },\n    __self: this\n  }), React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197\n    },\n    __self: this\n  }), React.createElement(Button, {\n    className: \"app-button\",\n    onClick: () => {},\n    variant: \"contained\",\n    color: \"primary\",\n    onClick: () => {\n      reportSalaryToBlockchain();\n    },\n    className: classes.button,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198\n    },\n    __self: this\n  }, \" Submit\"), \"\\xA0\\xA0\\xA0\", React.createElement(Button, {\n    className: \"app-button\",\n    onClick: () => {\n      setMnemonicBox(false);\n    },\n    variant: \"contained\",\n    color: \"primary\",\n    className: classes.button,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200\n    },\n    __self: this\n  }, \" Cancel\"))))))), React.createElement(Grid, {\n    item: true,\n    key: \"profileAnalysis\",\n    xs: 12,\n    md: 6,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208\n    },\n    __self: this\n  }, React.createElement(Card, {\n    className: classes.card,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: classes.cardDetails,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"app-box\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"app-box-title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212\n    },\n    __self: this\n  }, \"Performance Analysis\"), React.createElement(\"div\", {\n    className: \"app-box-content no-word-break\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213\n    },\n    __self: this\n  }, analysisJsx), React.createElement(\"a\", {\n    href: \"https://testnet.algoexplorer.io/address/43DYQRD5K5QWVUALPG25XHT5KR3FXUUBX3MABK7CVFMZEMIZAL5WRRIFMI\",\n    target: \"_blank\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214\n    },\n    __self: this\n  }, \"Browse others' salaries on-chain\")))))));\n}","map":{"version":3,"sources":["/Users/aslalamentik/Desktop/salarysprout/src/components/UserProfile.js"],"names":["React","useEffect","useRef","algosdk","makeStyles","CssBaseline","axios","Button","InputLabel","MenuItem","FormHelperText","Select","Toolbar","IconButton","SearchIcon","FormControl","Paper","Typography","Grid","Card","CardActionArea","CardContent","CardMedia","Hidden","Link","Divider","Container","Markdown","TextField","blockStatement","UserProfile","props","classes","db","user","cheerio","useState","profileJsx","setProfileJsx","analysisJsx","setAnalysisJsx","userData","setUserData","mnemonicBox","setMnemonicBox","mnemonic","setMnemonic","algod_address","algod_token","algod_client","Algod","token","server","console","log","client","status","catch","e","keyWordsMap","avgSalaries","userRef","collection","doc","email","split","join","mounted","current","renderProfile","renderAnalysis","jsx","getDoc","get","then","exists","data","a","push","err","position","yoe","salary","accountAddress","avgSalary","toLowerCase","absDiff","Math","abs","more","seniorDiff","algoexplorerUrl","reportSalaryToBlockchain","objToSend","gender","secret_key","mnemonicToSecretKey","txn","encodeObj","signedTxn","signTransaction","sk","card","cardDetails","onchain","button","event","target","value"],"mappings":"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","sourcesContent":["import React from 'react';\nimport {useEffect, useRef} from 'react';\nimport algosdk from 'algosdk';\nimport { makeStyles } from '@material-ui/core/styles';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport { axios } from './base';\nimport Button from '@material-ui/core/Button';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport Select from '@material-ui/core/Select';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport IconButton from '@material-ui/core/IconButton';\nimport SearchIcon from '@material-ui/icons/Search';\nimport FormControl from '@material-ui/core/FormControl';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport Grid from '@material-ui/core/Grid';\nimport Card from '@material-ui/core/Card';\nimport CardActionArea from '@material-ui/core/CardActionArea';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardMedia from '@material-ui/core/CardMedia';\nimport Hidden from '@material-ui/core/Hidden';\nimport Link from '@material-ui/core/Link';\nimport Divider from '@material-ui/core/Divider';\nimport Container from '@material-ui/core/Container';\nimport Markdown from './Markdown';\nimport TextField from '@material-ui/core/TextField';\nimport '../css/style.css'; // Tell Webpack that Button.js uses these styles\nimport { blockStatement } from '@babel/types';\n\nexport default function UserProfile(props) {\n  const {classes, db, user, cheerio} = props;\n  let [profileJsx, setProfileJsx] = React.useState('');\n  let [analysisJsx, setAnalysisJsx] = React.useState('');\n  let [userData, setUserData] = React.useState({});\n  let [mnemonicBox, setMnemonicBox] = React.useState(false);\n  let [mnemonic, setMnemonic] = React.useState('');\n\n  const algod_address = \"http://hackathon.algodev.network\";               \n  const algod_token = \"ef920e2e7e002953f4b29a8af720efe8e4ecc75ff102b165e0472834b25832c1\";\n  const algod_client = new algosdk.Algod(token, server, \"9100\");\n\n  (async () => {\n    console.log(await client.status());\n  })().catch(e => {\n      console.log(e);\n  });\n\n\n  console.log(user);\n  const keyWordsMap = {\n    \"name\" : \"Name\",\n    \"accountAddress\" : \"Account Address\",\n    \"company\" : \"Company\",\n    \"position\" : \"Position\",\n    \"yoe\" : \"Years of Experience\",\n    \"salary\" : \"Salary ($/year)\"\n  }\n\n  //from ZipRecruiter\n  const avgSalaries = {\n    \"software engineer\" : 98495,\n    \"senior software engineer\": 118706,\n    \"software developer\": 85929,\n    \"senior software developer\": 109921,\n    \"hardware engineer\": 102037,\n    \"senior hardware engineer\": 118563,\n    \"ux designer\": 97873,\n    \"senior ux designer\": 118242,\n    \"cloud engineer\": 129567,\n    \"senior cloud engineer\": 141706,\n    \"front end engineer\": 111789,\n    \"senior front end engineer\": 132069,\n    \"engineer\": 73081,\n    \"senior engineer\": 104865\n  }\n\n  let userRef = db.collection('users').doc((user.email).split('.').join(''));\n\n  const mounted = useRef();\n  useEffect(() => {\n      if (!mounted.current && profileJsx == '') {\n          renderProfile();\n      } \n      if (analysisJsx == '') {\n        renderAnalysis();\n      }\n  });\n  \n  const renderProfile = async () => {\n    if (!user) return;\n    let jsx = [];\n    let getDoc = await userRef.get()\n    .then(async (doc) => {\n      if (!doc.exists) {\n        return <>Profile not found. </>;\n      } else {\n        const data = doc.data();\n        setUserData(data);\n        for (var a in keyWordsMap) {\n          console.log(keyWordsMap[a], data[a]);\n          jsx.push(<span className='profileEntry' key={a}>{keyWordsMap[a]} : <b>{data[a]}</b>  <br></br></span>)\n        }\n\n      }\n      setProfileJsx(jsx);\n      renderAnalysis();\n    })\n    .catch(err => {\n      console.log('Error getting document', err);\n    });\n  }\n\n  const renderAnalysis = async () => {\n    const { position = '', yoe = '', salary = '', accountAddress = '' } = userData;\n    const avgSalary = avgSalaries[position.toLowerCase()] || 56516; //or average US salary\n    const jsx = [];\n    const absDiff = Math.abs(salary - avgSalary);\n    const more = (salary - avgSalary) > 0;\n    jsx.push(<>You are making <b>${absDiff}</b> {more ? 'more' : 'less'} than what an average {avgSalaries[position.toLowerCase()] ? position.toLowerCase() : 'worker'} makes in the United States. </>);\n    if (!more) {\n      if (yoe >=2 && yoe < 3) {\n        jsx.push(<>Given your years of experience, you should aim for a promotion and a raise soon if circumstances permit. </>);\n      } else if (yoe >= 3) {\n        jsx.push(<>Given your years of experience, you should ask for a promotion and a raise soon if circumstances permit. </>);\n      } else if (yoe > 5) {\n        jsx.push(<>Given your ample experience as a {position.toLowerCase()}, it is definitely time for a promotion and a raise if you have not gotten one recently. </>);\n      }\n      if (avgSalaries[\"senior \" + position.toLowerCase()]) {\n        const seniorDiff = avgSalaries[\"senior \" + position.toLowerCase()] - salary;\n        jsx.push(<>You could be making <b>${seniorDiff}</b> more as a senior {position.toLowerCase()}. \n        Don't be afraid to bring up your career goals and aspirations, there may be people who can help get you there.\n         You can do it!<br></br><br></br>\n        Fun fact: Studies found that you are likely to get more promotions at the age of \n        25 and 30 years old than any other age group.</>);\n      }\n    } else {\n      jsx.push(<>Keep up the good work! Think about how you can elevate others and help them get to where you are today. </>);\n    }\n    console.log(userData);\n    setAnalysisJsx(jsx);\n  }\n\n  const algoexplorerUrl = \"https://testnet.algoexplorer.io/address/\" + userData.accountAddress;\n\n  async function reportSalaryToBlockchain() {\n    const objToSend = {\n      \"position\" : userData.position,\n      \"yearsOfExperience\" : userData.yoe,\n      \"gender\" : userData.gender,\n      \"salary\" : userData.salary\n    }\n    var secret_key = algosdk.mnemonicToSecretKey(mnemonic);\n    const txn = { \n      \"to\": \"43DYQRD5K5QWVUALPG25XHT5KR3FXUUBX3MABK7CVFMZEMIZAL5WRRIFMI\",\n      \"fee\": 0,\n      \"amount\": 100000,\n      \"firstRound\": 51,\n      \"lastRound\": 61,\n      \"genesisID\": \"devnet-v33.0\",\n      \"genesisHash\": \"JgsgCaCTqIaLeVhyL6XlRu3n7Rfk2FxMeK+wRSaQ7dI=\",\n      \"closeRemainderTo\": \"IDUTJEUIEVSMXTU4LGTJWZ2UE2E6TIODUKU6UW3FU3UKIQQ77RLUBBBFLA\",\n      \"note\": algosdk.encodeObj(objToSend)\n    };\n    var signedTxn = algosdk.signTransaction(txn, secret_key.sk);\n  }\n\n  return (\n    <><Grid container spacing={4}><Grid item key=\"userProfile\" xs={12} md={6}>\n                  <Card className={classes.card}>\n                    <div className={classes.cardDetails}>\n                        <div className=\"app-box\">\n                            <div className='app-box-title'>User Profile</div>\n                              <div className='app-box-content'>{profileJsx}\n                              {(!mnemonicBox && user && !user.onchain) ?  <>\n                              <div className='margintop2'>Sharing your salary is anonymous on the Algorand blockchain as long as you do not reveal your account address to anyone.\n                                 Only the following fields will be shared: your gender, position, years of experience, and salary. Sharing your salary will help promote wage equality, and help\n                                  others with making their job decisions.\n                              </div>\n                              <Button className='app-button' onClick={() => { setMnemonicBox(true)}\n                                                        }  variant=\"contained\" color=\"primary\" className={classes.button}> Share your salary on-chain</Button></> : null}\n                              {mnemonicBox && (\n                                <>\n                                <div>\n                                <span className='margintop2'>First, visit <a href=\"https://bank.testnet.algorand.network/\" target=\"_blank\">the Algorand dispenser</a> to get some Algos for this blockchain transaction. \n                                Copy your account address shown above into the target address field on the dispenser page, complete the CAPTCHA and dispense. To check if the transaction was successful, \n                                <a href={algoexplorerUrl} target=\"_blank\"> visit this link to the Algoexplorer</a>. You should have a balance of 100 Algos (it might take a minute).</span></div>\n                                <TextField \n                                    placeholder=\"Enter your private key (mnemonic phrase)\"\n                                    multiline={true}\n                                    rows={2}\n                                    rowsMax={4}\n                                    onChange={ (event) => {setMnemonic(event.target.value) }}\n                                    margin=\"normal\"\n                                    variant=\"outlined\"\n                                  /><br></br>\n                                  <Button className='app-button' onClick={() => { }\n                                }  variant=\"contained\" color=\"primary\"  onClick={() => { reportSalaryToBlockchain()}} className={classes.button}> Submit</Button>&nbsp;&nbsp;&nbsp;\n                                <Button className='app-button' onClick={() => { setMnemonicBox(false)}\n                                                        }  variant=\"contained\" color=\"primary\" className={classes.button}> Cancel</Button></>\n                              )}\n                              </div>\n                        </div>\n                    </div>\n                  </Card>\n      </Grid>\n      <Grid item key=\"profileAnalysis\" xs={12} md={6}>\n                        <Card className={classes.card}>\n                          <div className={classes.cardDetails}>\n                              <div className=\"app-box\">\n                                  <div className='app-box-title'>Performance Analysis</div>\n                                    <div className='app-box-content no-word-break'>{analysisJsx}</div>\n                                    <a href=\"https://testnet.algoexplorer.io/address/43DYQRD5K5QWVUALPG25XHT5KR3FXUUBX3MABK7CVFMZEMIZAL5WRRIFMI\" target=\"_blank\">Browse others' salaries on-chain</a>\n                              </div>\n                          </div>\n                        </Card>\n      </Grid></Grid></>\n  );\n}"]},"metadata":{},"sourceType":"module"}